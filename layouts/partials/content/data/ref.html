
{{/* Get reference information */}}
{{/* ------------------------- */}}

{{/* Get site ref information */}}
{{ $data := false }}
{{ $webmentionClass := false }}

{{ if .Site.Data.refs }}

	{{/* Likes */}}
	{{ if and (eq .Params.subType "like") .Params.likeOf }}
		{{ $data = index .Site.Data.refs (md5 .Params.likeOf) | default nil }}
		{{ $webmentionClass = "u-like-of" }}
	{{ end }}
		
	{{/* Reposts */}}
	{{ if and (eq .Params.subType "repost") .Params.repostof }}
		{{ $data = index .Site.Data.refs (md5 .Params.repostof) | default nil }}
		{{ $webmentionClass = "u-repost-of" }}
	{{ end }}

	{{/* Replies */}}
	{{ if and (eq .Params.type "reply") .Params.inReplyTo }}
		{{ $data = index .Site.Data.refs (md5 .Params.inReplyTo) | default nil }}
		{{ $webmentionClass = "u-in-reply-to" }}
	{{ end }}
	{{ if and (eq .Params.subType "reply") .Params.inReplyTo }}
		{{ $data = index .Site.Data.refs (md5 .Params.inReplyTo) | default nil }}
		{{ $webmentionClass = "u-in-reply-to" }}
	{{ end }}

	{{/* Bookmarks */}}
	{{ if and (eq .Params.subType "bookmark") .Params.bookmarkOf }}
		{{ $data = dict "url" .Params.bookmarkOf }}
		{{ if .Site.Data.refs }}
			{{ $data = index .Site.Data.refs (md5 .Params.bookmarkOf) | default $data }}
		{{ end }}
		{{ $webmentionClass = "u-bookmark-of" }}
	{{ end }}

{{ end }}

{{
	return (dict
		"data" $data
		"webmentionClass" $webmentionClass
	)
}}